apiVersion: v1
data:
  checkgit.sh: |
    cd /tmp
    git config --global user.email yuuvis-init@yuuvis.org
    git config --global user.name yuuvis-init

    echo git clone
    if git clone  {{.Values.yuuvis.git.protocol}}://$GITUSER:$GITPWD@{{.Values.yuuvis.git.url}} \
        --branch {{.Values.yuuvis.git.branch}}; 
    then
        echo git branch {{.Values.yuuvis.git.branch}} exists
        cd {{.Values.yuuvis.git.name}}
        if [ -f application-prod.yml ]; 
        then 
            echo application-prod.yml exists 
            exit 0
        fi
    fi
    echo 'unexpected git state'
    exit 1  
kind: ConfigMap
metadata:
  name: initconfigserviceconfigmap
